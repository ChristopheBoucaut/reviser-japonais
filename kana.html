<!DOCTYPE html>
<html lang="fr" dir="ltr">
    <head>
        <meta charset="utf-8">
        <title>Réviser les kana</title>
        <style media="screen">
            #table {
                display: flex;
                align-items: center;
                flex-wrap: wrap;
                max-width: 800px;
            }

            #table > div:nth-child(odd) {
                margin-right: 5px;
                min-width: calc(6% - 5px);
            }

            #table > div:nth-child(even) {
                margin-right: 5px;
                min-width: calc(14% - 5px);
            }

            .answer {
                visibility: hidden;
            }

            #table.show-answers .answer {
                visibility: visible;
            }
        </style>
    </head>
    <body>
        <a href="index.html">&lt; Retour</a> <h1>Réviser les kana</h1>

        <p>
            hiragana :
            <button onclick="show(hiragana, true)">Syllable vers kana</button>
            <button onclick="show(hiragana, false)">Kana vers syllable</button>
        </p>
        <p>
            katakana :
            <button onclick="show(katakana, true)">Syllable vers kana</button>
            <button onclick="show(katakana, false)">Kana vers syllable</button>
        </p>
        <p>
            <input type="checkbox" id="random">
            <label for="random">Affichage random ?</label>
            <button onclick="toggleAnswers()">Voir/cacher les réponses</button>
        </p>

        <div id="table"></div>

        <script type="text/javascript">
            var hiragana = [
                ['あ', 'a'], ['い', 'i'], ['う', 'u'], ['え', 'e'], ['お', 'o'],
                ['か', 'ka'], ['き', 'ki'], ['く', 'ku'], ['け', 'ke'], ['こ', 'ko'],
                ['さ', 'sa'], ['し', 'shi'], ['す', 'su'], ['せ', 'se'], ['そ', 'so'],
                ['た', 'ta'], ['ち', 'chi'], ['つ', 'tsu'], ['て', 'te'], ['と', 'to'],
                ['な', 'na'], ['に', 'ni'], ['ぬ', 'nu'], ['ね', 'ne'], ['の', 'no'],
                ['は', 'ha'], ['ひ', 'hi'], ['ふ', 'fu'], ['へ', 'he'], ['ほ', 'ho'],
                ['ま', 'ma'], ['み', 'mi'], ['む', 'mu'], ['め', 'me'], ['も', 'mo'],
                ['や', 'ya'], [], ['ゆ', 'yu'], [], ['よ', 'yo'],
                ['ら', 'ra'], ['り', 'ri'], ['る', 'ru'], ['れ', 're'], ['ろ', 'ro'],
                ['わ', 'wa'], [], [], [], ['を', 'wo'],
                [], [], [], [], ['ん', 'n']
            ];
            var katakana = [
                ['ア', 'A'], ['イ', 'I'], ['ウ', 'U'], ['エ', 'E'], ['オ', 'O'],
                ['カ', 'KA'], ['キ', 'KI'], ['ク', 'KU'], ['ケ', 'KE'], ['コ', 'KO'],
                ['サ', 'SA'], ['シ', 'SHI'], ['ス', 'SU'], ['セ', 'SE'], ['ソ', 'SO'],
                ['タ', 'TA'], ['チ', 'CHI'], ['ツ', 'TSU'], ['テ', 'TE'], ['ト', 'TO'],
                ['ナ', 'NA'], ['ニ', 'NI'], ['ヌ', 'NU'], ['ネ', 'NE'], ['ノ', 'NO'],
                ['ハ', 'HA'], ['ヒ', 'HI'], ['フ', 'FU'], ['ヘ', 'HE'], ['ホ', 'HO'],
                ['マ', 'MA'], ['ミ', 'MI'], ['ム', 'MU'], ['メ', 'ME'], ['モ', 'MO'],
                ['ヤ', 'YA'], [], ['ユ', 'YU'], [], ['ヨ', 'YO'],
                ['ラ', 'RA'], ['リ', 'RI'], ['ル', 'RU'], ['レ', 'RE'], ['ロ', 'RO'],
                ['ワ', 'WA'], [], [], [], ['ヲ', 'WO'],
                [], [], [], [], ['ン', 'N']
            ];

            var tableEl = document.getElementById('table');
            var randomEl = document.getElementById('random');

            function show(syllabaire, syllableToKana) {
                clear();

                // On fait une copie.
                syllabaire = syllabaire.slice();
                if (randomEl.checked) {
                    syllabaire = shuffle(syllabaire);
                }
                for (var i = 0; i < syllabaire.length; i++) {
                    if (syllabaire[i][0]) {
                        if (syllableToKana) {
                            showCouple(syllabaire[i][1], syllabaire[i][0]);
                        } else {
                            showCouple(syllabaire[i][0], syllabaire[i][1]);
                        }
                    } else if (!randomEl.checked) {
                        showCouple('', '');
                    }
                }
            }

            function showCouple(shown, answer) {
                tableEl.innerHTML += '<div>'+shown+'</div>';
                tableEl.innerHTML += '<div class="answer">'+answer+'</div>';
            }

            function toggleAnswers() {
                tableEl.classList.toggle('show-answers');
            }

            function clear() {
                tableEl.innerHTML = '';
                tableEl.classList.remove('show-answers');
            }

            function shuffle(arr) {
                // Source de la méthode : https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
                var currentIndex = arr.length, temporaryValue, randomIndex;

                while (0 !== currentIndex) {
                    randomIndex = Math.floor(Math.random() * currentIndex);
                    currentIndex -= 1;

                    temporaryValue = arr[currentIndex];
                    arr[currentIndex] = arr[randomIndex];
                    arr[randomIndex] = temporaryValue;
                }

                return arr;
            }
        </script>
    </body>
</html>
